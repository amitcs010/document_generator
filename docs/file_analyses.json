[
  {
    "purpose": "This SQL script creates the `stage.products` table to store product information if it does not already exist.",
    "source_tables": [],
    "target_tables": [
      "stage.products"
    ],
    "transformations": [
      "The `product_id` column is an auto-incrementing primary key.",
      "The `price` column is defined as a numeric type with 10 digits total and 2 decimal places.",
      "The `updated_at` column automatically defaults to the current timestamp upon row insertion."
    ],
    "business_logic": "The table structure defines how product data, including a unique ID, name, category, and price with specific precision, should be stored, along with an automatic timestamp for record updates or creation.",
    "dependencies": [
      "schema: stage"
    ],
    "file_name": "src_products.sql",
    "file_type": "script",
    "file_path": "source/src_products.sql"
  },
  {
    "purpose": "This SQL script creates the 'customers' staging table with defined columns and default values.",
    "source_tables": [],
    "target_tables": [
      "stage.customers"
    ],
    "transformations": [
      "customer_id is defined as a BIGSERIAL primary key, ensuring unique auto-incrementing identifiers.",
      "created_at column automatically records the current timestamp upon row insertion."
    ],
    "business_logic": "Establishes the schema for storing customer information in a staging environment, including basic customer details, a unique identifier, and a creation timestamp.",
    "dependencies": [],
    "file_name": "src_customers.sql",
    "file_type": "script",
    "file_path": "source/src_customers.sql"
  },
  {
    "purpose": "Defines the schema for a `stage.sales` table to store raw sales transaction data.",
    "source_tables": [],
    "target_tables": [
      "stage.sales"
    ],
    "transformations": [],
    "business_logic": "Records individual sales transactions, ensuring unique identification (`sale_id` primary key), mandatory customer, product, quantity, price, and sale date, with specific data types and precision for financial values.",
    "dependencies": [
      "schema:stage"
    ],
    "file_name": "src_sales.sql",
    "file_type": "script",
    "file_path": "source/src_sales.sql"
  },
  {
    "purpose": "This SQL script creates a new table named `sales` within the `sales_strat_plan` schema to store sales transaction data if it doesn't already exist.",
    "source_tables": [],
    "target_tables": [
      "sales_strat_plan.sales"
    ],
    "transformations": [],
    "business_logic": "The script defines the structure for a sales transaction table, ensuring unique sales IDs via a primary key and enforcing data types and NOT NULL constraints for critical sales attributes like customer, product, quantity, price, and sale date.",
    "dependencies": [],
    "file_name": "mdl_sales.sql",
    "file_type": "script",
    "file_path": "models/mdl_sales.sql"
  },
  {
    "purpose": "Creates a new 'products' table in the 'matrl_mstr' schema to store product information.",
    "source_tables": [],
    "target_tables": [
      "matrl_mstr.products"
    ],
    "transformations": [
      "product_id is an auto-incrementing primary key (BIGSERIAL)",
      "price is stored as a numeric value with 10 digits total and 2 decimal places (NUMERIC(10,2))",
      "updated_at automatically records the current timestamp upon row creation if not specified (TIMESTAMP DEFAULT NOW())"
    ],
    "business_logic": "Establishes a schema for storing product master data, ensuring each product has a unique identifier, along with its name, category, price, and a timestamp for auditing.",
    "dependencies": [
      "mdl_products"
    ],
    "file_name": "mdl_products.sql",
    "file_type": "script",
    "file_path": "models/mdl_products.sql"
  },
  {
    "purpose": "Creates a new customer master table named 'customers' in the 'cust_mstr' schema to store core customer information.",
    "source_tables": [],
    "target_tables": [
      "cust_mstr.customers"
    ],
    "transformations": [
      "Generates a unique 'customer_id' automatically for each new record",
      "Automatically populates the 'created_at' column with the current timestamp upon record creation"
    ],
    "business_logic": "The table captures basic customer identification details (name, email, region) and tracks the creation timestamp for each customer record, ensuring unique identification via 'customer_id'.",
    "dependencies": [],
    "file_name": "mdl_customers.sql",
    "file_type": "script",
    "file_path": "models/mdl_customers.sql"
  },
  {
    "purpose": "stored_procedure SQL file",
    "source_tables": [
      "stage.products"
    ],
    "target_tables": [
      "matrl_mstr.products"
    ],
    "transformations": [
      "Data transformation"
    ],
    "business_logic": "See SQL file for details",
    "dependencies": [],
    "file_name": "sp_products.sql",
    "file_type": "stored_procedure",
    "file_path": "stored_procedures/sp_products.sql"
  },
  {
    "purpose": "stored_procedure SQL file",
    "source_tables": [
      "stage.sales"
    ],
    "target_tables": [
      "sales_strat_plan.sales"
    ],
    "transformations": [
      "Data transformation"
    ],
    "business_logic": "See SQL file for details",
    "dependencies": [],
    "file_name": "sp_sales.sql",
    "file_type": "stored_procedure",
    "file_path": "stored_procedures/sp_sales.sql"
  },
  {
    "purpose": "stored_procedure SQL file",
    "source_tables": [
      "stage.customers"
    ],
    "target_tables": [
      "cust_mstr.customers"
    ],
    "transformations": [
      "Data transformation"
    ],
    "business_logic": "See SQL file for details",
    "dependencies": [],
    "file_name": "sp_load_models.sql",
    "file_type": "stored_procedure",
    "file_path": "stored_procedures/sp_load_models.sql"
  },
  {
    "purpose": "view SQL file",
    "source_tables": [
      "cust_mstr.customers",
      "sales_strat_plan.sales",
      "matrl_mstr.products"
    ],
    "target_tables": [],
    "transformations": [
      "Data transformation"
    ],
    "business_logic": "See SQL file for details",
    "dependencies": [],
    "file_name": "sp_sales_cust_prod.sql",
    "file_type": "view",
    "file_path": "views/sp_sales_cust_prod.sql"
  }
]